<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>veriblock-pop-cpp: PoP Description</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="main.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">veriblock-pop-cpp
   </div>
   <div id="projectbrief">C++11 Libraries for leveraging VeriBlock Proof-Of-Proof blockchain technology.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('description.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">PoP Description </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md2">Terms</a></li>
<li class="level1"><a href="#autotoc_md3">Overview</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_docs_description"></a></p>
<h1><a class="anchor" id="autotoc_md2"></a>
Terms</h1>
<ul>
<li>Altchain (ALT) - abstract blockchain that inherits security of Bitcoin.</li>
<li>VeriBlock (VBK) - VeriBlock blockchain <a href="https://www.veriblock.org/">https://www.veriblock.org/</a>.</li>
<li><a class="el" href="structaltintegration_1_1ATV.html" title="Atlchain endorsement.">altintegration::ATV</a> - Cryptographic proof of Altchain block header publication in VeriBlock.</li>
<li><a class="el" href="structaltintegration_1_1VTB.html" title="Veriblock to Bitcoin publication, committed to Veriblock blockchain in containingBlock.">altintegration::VTB</a> - Cryptographic proof of VeriBlock block header publication in Bitcoin.</li>
<li><a class="el" href="structaltintegration_1_1VbkBlock.html" title="Veriblock block.">altintegration::VbkBlock</a> - VeriBlock block header.</li>
<li>Payloads - ATV, VTB, VbkBlock sometimes can be referred to as "payloads".</li>
<li><a class="el" href="structaltintegration_1_1PopData.html" title="Represents ALT block body of POP-related info.">altintegration::PopData</a> - contains a list of VTBs, a list of ATVs, and a list of VBK blocks, called "Context".</li>
<li>APM - Altchain PoP Miner.</li>
<li>VPM - VeriBlock PoP Miner.</li>
<li>Security Providing Chain (SP Chain) - blockchain, which stores endorsements and is used for providing security for SI chain.</li>
<li>Security Inheriting Chain (SI Chain) - blockchain, which consumes endorsements and utilizes properties of SP chain to improve its security.</li>
<li>Block Of Proof - block in SP chain, which stores endorsement of block from SI chain.</li>
<li>Endorsed Block - block in SI chain, for which we want to improve PoP score. More endorsements of a block - higher PoP score of this block.</li>
<li>Containing Block - block in SI chain, which stores proof of endorsement.</li>
<li><a class="el" href="structaltintegration_1_1VbkTx.html" title="Veriblock transaction, which endorses ALT block in VBK blockchain.">altintegration::VbkTx</a> (VBK TX) - VeriBlock transaction.</li>
<li><a class="el" href="structaltintegration_1_1BtcTx.html" title="Bitcoin transaction representation.">altintegration::BtcTx</a> (BTC TX) - Bitcoin transaction.</li>
<li><a class="el" href="structaltintegration_1_1VbkPopTx.html" title="Veriblock POP transaction, which endorses VBK block in BTC blockchain.">altintegration::VbkPopTx</a> (VBK POP TX) - VeriBlock PoP transaction.</li>
<li>PoP Payout Delay - altintegration::PoPPayoutsParams::getPoPPayoutDelay() - PoP payout will occur after this amount of blocks after endorsed block.</li>
<li>Endorsement Settlement Interval - <a class="el" href="structaltintegration_1_1AltChainParams.html#adeadf36cdbd2e7e3713064bbb56b42cc" title="Validity window for ATVs.">altintegration::AltChainParams::getEndorsementSettlementInterval()</a> - validity window for ATV.</li>
<li><a class="el" href="structaltintegration_1_1MemPool.html" title="Data structure, that stores in memory all valid payloads (ATV, VTB, VbkBlock) submitted by other peer...">altintegration::MemPool</a> (PoP MemPool) - memory pool for PoP-related payloads. Represents the content of the "next" block after current tip.</li>
<li>SPV - simplified payment verification.</li>
<li>Finalized/Finalization - this term can be applied to a block or transaction. A block is finalized if it can not be reorganized with very high probability (99.99%). For Bitcoin, finality is equal to 11 blocks. For VeriBlock, finality is 2000 blocks.</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Overview</h1>
<p><img src="topology.png" alt="" class="inline" title="Network Topology"/></p>
<p>PoP security is built around "endorsing" blocks. When miners want to increase likelyhood of finalizing a block, they "endorse" it and blocks after it by creating "endorsing transaction" in SP chain.</p>
<p>In example above, we see 3 chains (top-down): Bitcoin, VeriBlock, Altchain.</p>
<p>In Altchain, we want to finalize block A100, then:</p><ol type="1">
<li>APM creates <a class="el" href="structaltintegration_1_1VbkTx.html" title="Veriblock transaction, which endorses ALT block in VBK blockchain.">altintegration::VbkTx</a>, which contains <a class="el" href="structaltintegration_1_1PublicationData.html" title="Publication data about ALT block inside VBK blockchain.">altintegration::PublicationData</a> - an entity, which contains Endorsed Block header, and Payout Information - for rewarding APM for this endorsement.</li>
<li>This VBK TX is sent to VeriBlock.</li>
<li>VBK POW miners create block V54 - this block will include this VBK TX from step above.</li>
<li>APM builds cryptographic proof that endorsement of Altchain block is added to main chain. This proof is named ATV (Altchain to VeriBlock publication) and includes: VBK TX, Context (VBK blocks connecting V54 to V51 - V52..V53), Block Of Proof (V54), Merkle Path which proves that VBK TX is really inside V54.</li>
<li>Then all this data is sent to Altchain, and added to PoP MemPool.</li>
<li>When next <a class="el" href="structaltintegration_1_1AltBlock.html" title="Represents a view on Altchain block - i.e.">altintegration::AltBlock</a> is created by POW miner, this ATV is included into block A104.</li>
<li>If <code>PoP Payout Delay</code> is 50, then payout for this endorsement will occur in block A150.</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>ATV is contextually valid within <code>Endorsement Settlement Interval</code>, so if A100 is endorsed, and Settlement Interval is 50, then ATV can be added in any new block in range [A101..A150]. If ATV is not added to main chain within this range, it will expire and will be removed from PoP MemPool.</dd></dl>
<p>Continuing this example, VPM does exactly the same algorithm but with VBK blocks.</p>
<dl class="section note"><dt>Note</dt><dd>Endorsement Settlement Interval for VeriBlock is 400 blocks, PoP Payout Delay is also 400 blocks.</dd></dl>
<p>Block V54 contains proof for A100, and B16 contains proof for block V56. Since V56 is after V54, and V56 is finalized, we finalize all previous blocks, including V54, thus Altchain transitively inherits security of Bitcoin.</p>
<dl class="section note"><dt>Note</dt><dd>We count endorsements, whose according blocks of proof <b>are on main chains</b> of according blockchains. An endorsement whose block of proof is not on the main chain of SP chain is not eligible for PoP Payout.</dd></dl>
<p>You can also notice that VTBs and VBK blocks are sent to Altchain. This is needed to communicate Bitcoin and VeriBlock consensus information to Altchain. APM implementation continuously submits VBK blocks and VTBs found on VeriBlock network to Altchain, so it is important to have at least 1 APM running continuously for the whole network. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<script>
    $(document).ready(function(){
        $('.line').each(function(){
            var t = $(this).html()
            if(t.startsWith("+")) {
                $(this).addClass('diff-plus')
                $(this).html(t.slice(1))
                $(this).prepend(
                    $('<div>+</div>')
                        .addClass('noselect')
                        .addClass('sign')
                )
            } else if (t.startsWith("-")) {
                $(this).addClass('diff-minus')
                $(this).html(t.slice(1))
                $(this).prepend(
                    $('<div>-</div>')
                        .addClass('noselect')
                        .addClass('sign')
                )
            }
        })
    });
</script>