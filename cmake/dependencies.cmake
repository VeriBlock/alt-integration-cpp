if(WITH_ROCKSDB)
    set(WITH_GFLAGS 0 CACHE BOOL "build with gflags")
    set(WITH_TESTS OFF CACHE BOOL "build with tests")
    set(USE_RTTI 1 CACHE BOOL "build with rtti")
    # set(ROCKSDB_INSTALL_ON_WINDOWS ON CACHE BOOL "build for Windows")
    set(FAIL_ON_WARNINGS OFF CACHE BOOL "fail on warnings")
    set(PORTABLE ON CACHE BOOL "build portable")
    set(CMAKE_DISABLE_FIND_PACKAGE_NUMA TRUE CACHE BOOL "disable find NUMA package")
    set(CMAKE_DISABLE_FIND_PACKAGE_gtest TRUE CACHE BOOL "disable find gtest package")
    set(CMAKE_DISABLE_FIND_PACKAGE_Git TRUE CACHE BOOL "disable find git package")
    message(STATUS "Adding rocksdb")
    add_subdirectory(${CMAKE_SOURCE_DIR}/deps/rocksdb EXCLUDE_FROM_ALL)
    disable_clang_tidy(rocksdb)
endif()

find_package(GTest)
if(NOT GTEST_FOUND)
    message(WARNING "Can not find GTest. Tests will not be built.")
    set(TESTING OFF)
endif()
